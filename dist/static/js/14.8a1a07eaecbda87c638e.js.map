{"version":3,"sources":["webpack:///./src/pages/tabpage/syspage/roleList.vue?8c3c","webpack:///./src/pages/tabpage/syspage/roleList.vue?53b3","webpack:///src/pages/tabpage/syspage/roleList.vue","webpack:///./src/pages/tabpage/syspage/roleList.vue"],"names":["syspage_roleListvue_type_script_lang_js_","methods","handleClose","init","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","data","wrap","_context","prev","next","loading","Req","get","api","getAllRole","sent","code","tableData","roleList","stop","changeRoleName","row","_this2","dialogVisiblerole","$nextTick","roleValidateForm","checksEdit","flag","_this3","dialogVisible","roleid","role_id","getRoleTreePer","treeMenu","setDisabled","trees","map","it1","disabled","children","dataTree","callback","_this4","_callee2","_ref2","_context2","sysMenutree","_this5","_callee3","_ref3","_context3","$refs","tree","setCheckedKeys","res_id","submit","_this6","_callee4","resIdArr","_ref4","msg","_context4","getCheckedKeys","post","setRoleTreePer","res_idArr","$message","message","type","submitForm","formName","_this7","validate","valid","console","log","isRoleCheck","updateRole","createRole","_this8","_callee5","_ref5","_context5","role_name","role_code","_this9","_callee6","_ref6","_context6","put","deleteRole","_this10","_callee8","_context8","$confirm","confirmButtonText","cancelButtonText","then","_callee7","param","_ref8","_context7","delete","catch","createDialog","resetForm","_this11","resetFields","resIdarr","defaultProps","label","created","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","attrs","title","visible","append-to-body","close-on-click-modal","width","on","update:visible","$event","ref","show-checkbox","expand-on-click-node","default-expand-all","accordion","highlight-current","check-strictly","node-key","props","_v","staticClass","slot","click","size","model","label-width","prop","rules","required","autocomplete","value","$$v","$set","expression","icon","directives","name","rawName","staticStyle","border","stripe","fit","align","fixed","scopedSlots","_u","key","fn","scope","effect","__webpack_exports__"],"mappings":"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","file":"static/js/14.8a1a07eaecbda87c638e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-dialog',{attrs:{\"title\":\"菜单权限\",\"visible\":_vm.dialogVisible,\"append-to-body\":\"\",\"close-on-click-modal\":false,\"width\":\"20%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.dataTree,\"show-checkbox\":\"\",\"expand-on-click-node\":true,\"default-expand-all\":\"\",\"accordion\":\"\",\"highlight-current\":\"\",\"check-strictly\":\"\",\"node-key\":\"res_id\",\"props\":_vm.defaultProps}}),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":_vm.isRoleCheck ? '编辑角色' : '新增角色',\"visible\":_vm.dialogVisiblerole,\"width\":\"25%\"},on:{\"update:visible\":function($event){_vm.dialogVisiblerole=$event}}},[_c('el-form',{ref:\"roleValidateForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.roleValidateForm,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"角色名\",\"prop\":\"role_name\",\"rules\":[\n            { required: true, message: '角色名不能为空'}\n          ]}},[_c('el-input',{attrs:{\"type\":\"input\",\"autocomplete\":\"off\"},model:{value:(_vm.roleValidateForm.role_name),callback:function ($$v) {_vm.$set(_vm.roleValidateForm, \"role_name\", $$v)},expression:\"roleValidateForm.role_name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"role_code\",\"label\":\"角色编码\"}},[_c('el-input',{attrs:{\"type\":\"input\",\"autocomplete\":\"off\"},model:{value:(_vm.roleValidateForm.role_code),callback:function ($$v) {_vm.$set(_vm.roleValidateForm, \"role_code\", $$v)},expression:\"roleValidateForm.role_code\"}})],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('roleValidateForm')}}},[_vm._v(\"提交\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('roleValidateForm')}}},[_vm._v(\"重置\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"btn-box\"},[_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-circle-plus-outline\",\"type\":\"primary\"},on:{\"click\":_vm.createDialog}},[_vm._v(\"新建\")])],1),_vm._v(\" \"),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"size\":\"small\",\"border\":\"\",\"stripe\":\"\",\"fit\":\"\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"fixed\":\"\",\"prop\":\"role_id\",\"label\":\"角色ID\",\"width\":\"150\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"fixed\":\"\",\"prop\":\"role_code\",\"label\":\"角色编码\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"role_name\",\"label\":\"角色名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"width\":\"00\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{directives:[{name:\"hasAuth\",rawName:\"v-hasAuth\",value:('sys:role:lookPerms'),expression:\"'sys:role:lookPerms'\"}],attrs:{\"type\":\"primary\",\"icon\":\"el-icon-view\",\"size\":\"mini\",\"effect\":\"dark\"},on:{\"click\":function($event){return _vm.checksEdit(scope.row, true)}}},[_vm._v(\"查看权限\")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"hasAuth\",rawName:\"v-hasAuth\",value:('sys:role:editPerms'),expression:\"'sys:role:editPerms'\"}],attrs:{\"type\":\"warning\",\"icon\":\"el-icon-edit\",\"size\":\"mini\",\"effect\":\"dark\"},on:{\"click\":function($event){return _vm.checksEdit(scope.row, false)}}},[_vm._v(\"编辑权限\")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"hasAuth\",rawName:\"v-hasAuth\",value:('sys:role:update'),expression:\"'sys:role:update'\"}],attrs:{\"icon\":\"el-icon-edit\",\"type\":\"primary\",\"effect\":\"dark\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.changeRoleName(scope.row, false),_vm.isRoleCheck = true}}},[_vm._v(\"修改\")]),_vm._v(\" \"),_c('el-button',{directives:[{name:\"hasAuth\",rawName:\"v-hasAuth\",value:('sys:role:delete'),expression:\"'sys:role:delete'\"}],attrs:{\"type\":\"danger\",\"effect\":\"dark\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteRole(scope.row, false)}}},[_vm._v(\"删除\")])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/vue-loader/lib??vue-loader-options!./src/pages/tabpage/syspage/roleList.vue?vue&type=template&id=bbd361da&\n// module id = null\n// module chunks = ","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roleList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roleList.vue?vue&type=script&lang=js&\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tabpage/syspage/roleList.vue?vue&type=script&lang=js&\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <el-dialog  title=\"菜单权限\" :visible.sync=\"dialogVisible\" append-to-body :close-on-click-modal=\"false\"  width=\"20%\">\n      <el-tree\n        :data=\"dataTree\"\n        show-checkbox\n        :expand-on-click-node=\"true\"\n        default-expand-all\n        accordion highlight-current\n        check-strictly\n        node-key=\"res_id\"\n        ref=\"tree\"\n        :props=\"defaultProps\">\n      </el-tree>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\n        <el-button size=\"small\"  type=\"primary\" @click=\"submit\">确 定</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog :title=\"isRoleCheck ? '编辑角色' : '新增角色'\"  :visible.sync=\"dialogVisiblerole\" width=\"25%\" >\n      <el-form :model=\"roleValidateForm\" ref=\"roleValidateForm\" label-width=\"100px\" class=\"demo-ruleForm\">\n          <el-form-item\n            label=\"角色名\"\n            prop=\"role_name\"\n            :rules=\"[\n              { required: true, message: '角色名不能为空'}\n            ]\"\n          >\n            <el-input type=\"input\" v-model=\"roleValidateForm.role_name\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n          <el-form-item  prop=\"role_code\"   label=\"角色编码\">\n              <el-input type=\"input\" v-model=\"roleValidateForm.role_code\" autocomplete=\"off\"></el-input>\n          </el-form-item>\n        </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"submitForm('roleValidateForm')\">提交</el-button>\n        <el-button @click=\"resetForm('roleValidateForm')\">重置</el-button>\n      </span>\n    </el-dialog>\n    <div class=\"btn-box\">\n      <el-button size=\"mini\" icon=\"el-icon-circle-plus-outline\" type=\"primary\" @click=\"createDialog\">新建</el-button>\n    </div>\n    <el-table :data=\"tableData\" v-loading=\"loading\"  size=\"small\"  border  stripe  fit   style=\"width: 100%\">\n      <el-table-column      align=\"center\"  fixed   prop=\"role_id\"  label=\"角色ID\"    width=\"150\"></el-table-column>\n      <el-table-column      align=\"center\"  fixed   prop=\"role_code\" label=\"角色编码\"></el-table-column>\n      <el-table-column      align=\"center\"  prop=\"role_name\"      label=\"角色名称\" ></el-table-column>\n      <el-table-column       align=\"center\" label=\"操作\"     width=\"00\">\n          <template slot-scope=\"scope\">\n            <el-button v-hasAuth=\"'sys:role:lookPerms'\" @click=\"checksEdit(scope.row, true)\" type=\"primary\" icon=\"el-icon-view\" size=\"mini\" effect=\"dark\">查看权限</el-button>\n            <el-button v-hasAuth=\"'sys:role:editPerms'\" @click=\"checksEdit(scope.row, false)\" type=\"warning\" icon=\"el-icon-edit\" size=\"mini\" effect=\"dark\">编辑权限</el-button>\n            <el-button v-hasAuth=\"'sys:role:update'\" @click=\"changeRoleName(scope.row, false),isRoleCheck = true\"  icon=\"el-icon-edit\" type=\"primary\" effect=\"dark\" size=\"mini\">修改</el-button>\n            <el-button v-hasAuth=\"'sys:role:delete'\" @click=\"deleteRole(scope.row, false)\" type=\"danger\" effect=\"dark\" icon=\"el-icon-delete\" size=\"mini\">删除</el-button>\n         </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n<script>\nimport { api } from '@/request/api.js'\nexport default {\n  methods: {\n    handleClose () {},\n    async init () {\n      this.loading = true\n      let { data, code } = await this.Req.get(api.getAllRole)\n      if (code === 200) {\n        this.tableData = data.roleList\n      }\n      this.loading = false\n    },\n    changeRoleName (row) {\n      this.dialogVisiblerole = true\n      this.$nextTick(() => { // 确保dom渲染玩再做赋值处理不然当重置表单会有问题\n        this.roleValidateForm = row\n      })\n    },\n    // 查看编辑权限\n    checksEdit (row, flag) {\n      this.dialogVisible = true\n      this.roleid = row.role_id\n      this.getRoleTreePer(this.roleid)\n      function setDisabled (trees, flag) {\n        trees.map((it1) => {\n          it1.disabled = flag\n          if (it1.children) {\n            setDisabled(it1.children, flag)\n          }\n        })\n      }\n      this.treeMenu(() => { // 当树加载完毕再修改disabled属性\n        setDisabled(this.dataTree, flag)\n      })\n    },\n    // 获取菜单树\n    async treeMenu (callback) {\n      let { data, code } = await this.Req.get(api.sysMenutree)\n      if (code === 200) {\n        this.dataTree = data\n        callback()\n      }\n    },\n    async getRoleTreePer (roleid) {\n      let { data, code } = await this.Req.get(api.getRoleTreePer, { role_id: roleid })\n      if (code === 200) {\n        this.$refs.tree.setCheckedKeys(data.res_id)\n      }\n    },\n    // 修改权限\n    async submit () {\n      let resIdArr = this.$refs.tree.getCheckedKeys()\n      let { code, msg } = await this.Req.post(api.setRoleTreePer, {res_idArr: resIdArr, role_id: this.roleid})\n      if (code === 200) {\n        this.$message({\n          message: msg,\n          type: 'success'\n        })\n        this.dialogVisible = false\n      } else {\n        this.dialogVisible = false\n        this.$message({\n          message: msg,\n          type: 'success'\n        })\n      }\n    },\n    // 编辑创建\n    submitForm (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          if (this.isRoleCheck) {\n            this.updateRole()\n          } else {\n            this.createRole()\n          }\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    async createRole () {\n      let { code, msg } = await this.Req.post(api.createRole, {\n        role_name: this.roleValidateForm.role_name,\n        role_code: this.roleValidateForm.role_code })\n      if (code === 200) {\n        this.init()\n        this.$message({\n          message: msg,\n          type: 'success'\n        })\n        this.dialogVisiblerole = false\n      } else {\n        this.dialogVisiblerole = false\n        this.$message({\n          message: msg,\n          type: 'success'\n        })\n      }\n    },\n    async updateRole () {\n      let { code, msg } = await this.Req.put(api.updateRole, {\n        role_id: this.roleValidateForm.role_id,\n        role_name: this.roleValidateForm.role_name,\n        role_code: this.roleValidateForm.role_code })\n      if (code === 200) {\n        this.init()\n        this.$message({\n          message: msg,\n          type: 'success'\n        })\n        this.dialogVisiblerole = false\n      } else {\n        this.dialogVisiblerole = false\n        this.$message({\n          message: msg,\n          type: 'success'\n        })\n      }\n    },\n    async deleteRole (row) {\n      this.$confirm('此操作将永久删除该角色, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        let param = { role_id: row.role_id }\n        let { code, msg } = await this.Req.delete(api.deleteRole, {data: param})\n        if (code === 200) {\n          this.init()\n          this.$message({\n            type: 'success',\n            message: msg\n          })\n        }\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        })\n      })\n    },\n    createDialog () {\n      this.dialogVisiblerole = true\n      this.isRoleCheck = false\n      this.resetForm('roleValidateForm')\n    },\n    resetForm (formName) {\n      this.$nextTick(() => {\n        this.$refs[formName].resetFields()\n      })\n    }\n  },\n  data () {\n    return {\n      dialogVisible: false,\n      dialogVisiblerole: false,\n      isRoleCheck: false,\n      tableData: [],\n      dataTree: [],\n      resIdarr: [],\n      roleid: '',\n      loading: false,\n      defaultProps: {\n        children: 'children',\n        label: 'res_name'\n      },\n      roleValidateForm: {\n        role_name: '',\n        role_code: '',\n        role_id: ''\n      }\n    }\n  },\n  created () {\n    this.init()\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/tabpage/syspage/roleList.vue","import { render, staticRenderFns } from \"./roleList.vue?vue&type=template&id=bbd361da&\"\nimport script from \"./roleList.vue?vue&type=script&lang=js&\"\nexport * from \"./roleList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tabpage/syspage/roleList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}